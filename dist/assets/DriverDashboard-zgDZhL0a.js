import{r as a,u as h,a as v,j as t}from"./index-B9wrcDWQ.js";import{s as T}from"./scheduledBus.service-ImcWo4LN.js";import{P as g}from"./Container-Dk9VdPk9.js";import{P as x}from"./PageHeader-BHYpsllP.js";import{N as S}from"./NormalTable-Dl69B-GF.js";import{c as k}from"./convertToIST-C7FokF_m.js";import"./ButtonList-DgGakKsg.js";import"./ToggleSwitch-0XDEILB1.js";const B=()=>{const[r,n]=a.useState([]),[d,o]=a.useState(!1),[u,m]=a.useState(null),i=h(),{user:s}=v(e=>e.user),f=[{label:"Bus No",field:"bus.busNumber"},{label:"Route",field:"route.routeName"},{label:"Schedule Time",field:"scheduleTime"},{label:"Status",field:"status"},{label:"Comments",field:"comments"}],b=[{label:"View",icon:"mdi:eye",callback:e=>i(e._id)},{label:"Edit",icon:"mdi:pencil",callback:e=>i(e._id)}];return a.useEffect(()=>{(async()=>{if(s&&s._id)try{o(!0);const p=(await T.getAllScheduledBuses({driverId:s._id})).map(c=>({...c,scheduleTime:k(c.scheduleTime)}));n(p)}catch(l){m(l.message)}finally{o(!1)}})()},[s]),t.jsxs(g,{children:[t.jsx(x,{title:"Driver Dashboard",buttons:[],description:`You have ${r.length} tasks assigned.`}),t.jsx("div",{className:"w-screen md:w-auto overflow-x-auto",children:t.jsx(S,{headers:f,data:r,actions:b,isLoading:d,error:u})})]})};export{B as default};
