import{r as s,j as e,b as E,h as u,k as m}from"./index-B9wrcDWQ.js";import{a as U}from"./objectCompraion-f8g0dwj-.js";import{P as S}from"./PageHeader-BHYpsllP.js";import{P as w}from"./Container-Dk9VdPk9.js";import{T as B}from"./TabContainer-DqSLoziL.js";import{T as c,a as n,S as h}from"./ToggleSwitch-0XDEILB1.js";import{u as D}from"./url.service-CC_ivgR1.js";import"./ButtonList-DgGakKsg.js";const L=()=>{const[x,p]=s.useState(!0),[l,v]=s.useState(null),[O,g]=s.useState(!1),o=D.getId(),[a,r]=s.useState({firstName:"",lastName:"",contactNumber:"",email:"",address:"",dateOfBirth:"",role:"User",isActive:!0,gender:"Male",emergencyContact:{name:"",contactNumber:""},profilePicture:"https://www.shutterstock.com/image-vector/blank-avatar-photo-place-holder-600nw-1095249842.jpg",permissions:[],addedToDB:!1}),[j,f]=s.useState([{id:"save-user",label:"Save",icon:"fa-solid:save",disabled:!0},{id:"delete-user",label:"Delete",icon:"material-symbols:delete-rounded"}]),b=a.dateOfBirth?new Date(a.dateOfBirth).toISOString().split("T")[0]:"",y=async()=>{try{const t=await u.getUserById(o);r(t),v(t)}catch(t){console.error("Error fetching user data:",t)}finally{p(!1)}};s.useEffect(()=>{y()},[]),s.useEffect(()=>{if(a&&l){const t=!U(a,l,["createdAt","updatedAt","profilePicture"]);f(d=>d.map(i=>i.id==="save-user"?{...i,disabled:!t}:i))}},[a,l]);const C=async t=>{if(t==="save-user")return await N(),!0;g(!0)},N=async()=>{const t={...a};delete t.createdAt,delete t.updatedAt;try{await u.updateUser(o,t),m.success("User data updated")}catch{m.error("Failed to update user")}};return e.jsxs(w,{children:[e.jsx(E,{show:x}),e.jsx(S,{title:`Users > ${a.firstName} ${a.lastName}`,description:"Edit user profile details",buttons:j,onButtonClick:C,goBack:!0}),e.jsx(B,{children:e.jsxs(c,{variant:"underline",children:[e.jsx(c.Item,{active:!0,title:"Basic Information",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"First Name"}),e.jsx(n,{type:"text",value:a.firstName,onChange:t=>r({...a,firstName:t.target.value}),placeholder:"Enter first name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Last Name"}),e.jsx(n,{type:"text",value:a.lastName,onChange:t=>r({...a,lastName:t.target.value}),placeholder:"Enter last name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email"}),e.jsx(n,{type:"email",value:a.email,onChange:t=>r({...a,email:t.target.value}),placeholder:"Enter email",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Contact Number"}),e.jsx(n,{type:"text",value:a.contactNumber,onChange:t=>r({...a,contactNumber:t.target.value}),placeholder:"Enter contact number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Date of Birth"}),e.jsx(n,{type:"date",value:b,onChange:t=>r({...a,dateOfBirth:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Gender"}),e.jsxs(h,{value:a.gender,onChange:t=>r({...a,gender:t.target.value}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Role"}),e.jsxs(h,{value:a.role,onChange:t=>r({...a,role:t.target.value}),children:[e.jsx("option",{value:"User",children:"User"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Driver",children:"Driver"})]})]})]})}),e.jsx(c.Item,{title:"Emergency Contact",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx(n,{type:"text",value:a.emergencyContact.name,onChange:t=>r({...a,emergencyContact:{...a.emergencyContact,name:t.target.value}}),placeholder:"Enter emergency contact name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Contact Number"}),e.jsx(n,{type:"text",value:a.emergencyContact.contactNumber,onChange:t=>r({...a,emergencyContact:{...a.emergencyContact,contactNumber:t.target.value}}),placeholder:"Enter emergency contact number",required:!0})]})]})})]})})]})};export{L as default};
