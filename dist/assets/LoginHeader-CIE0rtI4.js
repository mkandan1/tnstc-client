import{j as e,r as c,u as b,L as w,I as N,f as v,k as u}from"./index-B9wrcDWQ.js";import{a as E,B as L}from"./ButtonList-DgGakKsg.js";const C=({id:s,label:a})=>e.jsx("label",{htmlFor:s,className:"text-[14.5px] tracking-tight text-gray-600 font-medium",children:a}),S=({id:s,type:a,value:l,placeholder:r,onChange:o,spellCheck:t})=>e.jsx("input",{id:s,type:a,value:l,placeholder:r,onChange:n=>o(n.target.value),spellCheck:t??!0,autoComplete:"off",className:`h-10 w-full md:w-auto text-gray-600 bg-blueGray-50 transition-all text-base border border-blueGray-300 py-2 px-3 \r
                       focus:outline-none focus:ring-2 focus:border focus:border-purple-400 focus:ring-purple-300 rounded \r
                       placeholder:text-blueGray-400 placeholder:text-sm placeholder:tracking-tight \r
                        sm:px-4 lg:py-3`}),g=({id:s,type:a,value:l,label:r,placeholder:o,spellCheck:t,onChange:n})=>e.jsxs("div",{className:"flex flex-col gap-y-2 mt-5",children:[e.jsx(C,{id:s,label:r}),e.jsx(S,{id:s,type:a,value:l,placeholder:o,spellCheck:t,onChange:n})]});function x(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}function k(s){return(s==null?void 0:s.length)>6}const P=()=>{const[s,a]=c.useState(null),[l,r]=c.useState(null),[o,t]=c.useState(!1),[n,d]=c.useState({state:!1,message:""});b();const f=[{id:"login",label:"Login",icon:"ic:round-login"}],h=i=>a(i),j=i=>r(i),y=async()=>{var i;if(t(!0),!s||!l){d({state:!0,message:"Enter all required fields."}),t(!1);return}if(!x(s)||!k(l)){d({state:!0,message:"Invalid email or password format."}),t(!1);return}try{const m=await v.post("http://localhost:3000/v1/auth/login",{email:s,password:l});m.data.success?m.data.user.role=="manager"||m.data.user.role=="admin"?(u.success("Logged in successfully"),window.location.href="/manager/home"):(u.success("Logged in successfully"),window.location.href="/driver/home"):d({state:!0,message:"Wrong email or password."})}catch(m){d({state:!0,message:((i=m.response)==null?void 0:i.status)===401?"Wrong email or password.":"An unexpected error occurred."})}finally{t(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[n.state&&e.jsx(p,{message:n.message}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(g,{id:"email",label:"Email",spellCheck:!1,type:"email",placeholder:"Enter your email address",onChange:h}),e.jsx(g,{id:"password",label:"Password",type:"password",placeholder:"Enter your password",onChange:j})]}),e.jsxs("div",{className:"my-6 flex flex-col gap-y-5 items-center",children:[e.jsx(E,{buttons:f,onClick:i=>y()}),e.jsxs(w,{to:"/forgot-password",className:"text-blue-500 text-sm flex items-center gap-x-2",children:[e.jsx(N,{icon:"carbon:password"}),"Forgot password?"]})]})]})},R=()=>{const[s,a]=c.useState(null),[l,r]=c.useState(!1),[o,t]=c.useState({state:!1,message:""}),n=()=>{if(r(!0),!s){t({state:!0,message:"Enter your email address."}),r(!1);return}if(!x(s)){t({state:!0,message:"Invalid email format."}),r(!1);return}setTimeout(()=>{u.success("Reset email has been sent"),t({state:!1,message:""}),r(!1)},2e3)};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[o.state&&e.jsx(p,{message:o.message}),e.jsx("div",{className:"space-y-4",children:e.jsx(g,{id:"email",label:"Email",spellCheck:!1,type:"email",placeholder:"Enter your email address",onChange:d=>a(d)})}),e.jsx("div",{className:"mt-6",children:e.jsx(L,{label:"Send",isLoading:l,size:"large",onClick:n})})]})},p=({message:s})=>e.jsxs("div",{className:"bg-red-100 mt-5 w-[100%] border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"Error"}),e.jsx("p",{children:s})]}),T=({title:s,description:a})=>e.jsxs("div",{className:"login-header py-3 flex flex-col gap-y-10",children:[e.jsx("div",{className:"flex",children:e.jsx("img",{src:"https://www.tnstc.in/OTRSOnline/newHSite/images/logo.png",className:"",alt:"TNSTC"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-700",children:s}),e.jsx("p",{className:"text-sm text-gray-500",children:a})]})]});export{R as F,T as H,P as L};
