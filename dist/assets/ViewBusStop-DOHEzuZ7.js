import{u as B,r as o,j as e,k as r}from"./index-B9wrcDWQ.js";import{P as v}from"./Container-Dk9VdPk9.js";import{P as j}from"./PageHeader-BHYpsllP.js";import{g as y}from"./url.service-CC_ivgR1.js";import{b as c}from"./stop.service-Yq49OPy_.js";import{M as N}from"./MapContainer-BIFfYiqE.js";import{B as k}from"./BusStopManager-D67D6L0V.js";import{T as w}from"./TabContainer-DqSLoziL.js";import{T as p,a as C}from"./ToggleSwitch-0XDEILB1.js";import{a as D}from"./objectCompraion-f8g0dwj-.js";import"./ButtonList-DgGakKsg.js";import"./mapbox-gl-COE2yGkF.js";const z=()=>{const l=y(),m=B(),[a,n]=o.useState({name:null,coordinates:{lng:null,lat:null},active:!0}),[i,d]=o.useState(),[E,f]=o.useState(!0),[A,S]=o.useState(null),[h,u]=o.useState(!0),b=[{id:"save",label:"Save",icon:"fa-solid:save",disabled:h},{id:"delete",label:"Delete",icon:"material-symbols:delete-rounded",disabled:!1}];o.useEffect(()=>{(async()=>{try{const t=await c.getBusStopById(l);n(t.busStop),d(t.busStop)}catch(t){S(t.message),r.error("Failed to fetch bus stop details")}finally{f(!1)}})()},[l]),o.useEffect(()=>{a&&i&&u(D(a,i,["createdAt","updatedAt"]))},[a,i]);const x=async s=>{n(t=>({...t,coordinates:{lat:s.lat,lng:s.lng}}))},g=async s=>{if(s=="save")try{await c.updateBusStop(l,a),d(a),u(!0),r.success("Bus stop updated successfully")}catch{r.error("Failed to update bus stop")}else s=="delete"&&await c.deleteBusStop(l).then(t=>{r.success("Stop has been deleted from record"),m("/manager/stops")}).catch(t=>r.error("An error occured"))};return e.jsxs(v,{children:[e.jsx(j,{title:`Bus Stop: ${a.name}`,buttons:b,goBack:!0,onButtonClick:g}),e.jsx(w,{children:e.jsx(p,{children:e.jsx(p.Item,{title:"Bus Stop",children:e.jsxs("div",{className:"space-y-20 relative",children:[e.jsx("div",{className:"w-full h-[50vh]",children:e.jsx(N,{children:s=>e.jsx(k,{mapInstance:s,onBusStopAdded:x,busStop:a})})}),e.jsxs("div",{className:"w-96 mt-10",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bus Stop Name"}),e.jsx(C,{type:"text",placeholder:"Stop Name",value:a.name||"",onChange:s=>{n(t=>({...t,name:s.target.value}))}})]})]})})})})]})};export{z as default};
